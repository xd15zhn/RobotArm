# RobotArm  
舵机机械臂上位机程序  
版本 V1.06  
## 使用说明  
release中下载armUI.exe、armSolve.dll这2个文件，使用时须放在同一个目录。  
### 文件说明  
该仓库为完整的vs2019解决方案，包含2个项目：  
* armUI: c#上位机项目，用于生成机械臂UI界面；  
* armSolve: c++动态链接库项目，用于后台各种算法；  
### 坐标系  
世界坐标系固定于地面，固定坐标系固定于机械臂原点。  
机械臂mcu61的固定坐标系相对于世界坐标系向z轴正方向平移93mm。  
### 界面  
界面分别为：关节名称、舵机PWM拖动条、舵机PWM显示、舵机rad角度、关节DH参数中的θ参数(下文用DH参数代指)、
设置复位按钮、舵机反向勾选框、目标点坐标和指令按钮。   
关节名称：共8个关节，暂时用到4个，从上到下为从肩关节到腕关节。  
舵机反向勾选框：默认舵机PWM增加将使关节DH参数增加，如果相反，则勾选该舵机的反向勾选框。  
按钮从上到下分别为：复位、更新、正解、逆解、归中。  
* 复位  
将机械臂恢复至直立状态以省电。  
* 设置参数  
对于关节舵机，  
将文本框中的角度设置为舵机归中时的DH参数，  
并将拖动条归中，PWM恢复1500，角度归零。  
将文本框中的值限制在正负3.1416(180°)之间。  
对于抓取舵机，  
将文本框中的值设置为抓取舵机抓住时的PWM值，同时更新拖动条和PWM值。  
* 更新  
将舵机角度文本框中的角度转换成舵机PWM值并更新PWM拖动条和DH参数。  
将文本框中的值限制在正负0.7854(45°)之间。  
* 正解  
调用动态链接库armSolve.dll，根据DH参数计算机械臂正运动学，将计算出来的结果显示于目标点坐标。  
* 逆解  
调用动态链接库armSolve.dll，根据目标点坐标计算机械臂逆运动学。  
当移动速度选择快速时，立即更新舵机PWM值;  
否则，启动计数器，计算插值点。  
当抓取模式选为抓取时，抓取舵机在移动前打开，到达目标位置后收缩;  
否则，抓取舵机在移动前保持不变，到达目标位置后打开。  
抓取模式仅在移动速度选为慢速时生效。  
* 归中  
拖动条归中，PWM恢复1500，角度归零，DH参数恢复舵机归中时的值。  
### 版本更新说明  
在移动过程中允许以慢速移动。  
界面有一定改动。  
重新校正并修改了舵机归中时的DH参数。  
重新测量并修改了连杆的长度。  